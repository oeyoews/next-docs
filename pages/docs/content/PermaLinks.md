---
title: '永久链接'
---

永久链接允许直接链接到 ~TiddlyWiki 内的一些个别条目。

# 简单的永久链接

最简单的永久链接形式 (<<.icon $:/core/images/permalink-button>>) 是一个单一的目标条目名称与 `#` 附加到基本网址：

<https://tiddlywiki.com/#HelloThere>

如果需要，条目名称可以包含空格：

<https://tiddlywiki.com/#Using TiddlyWiki on Node.js>

请注意，目标条目名称前后不需要双方括弧：但是，如果存在，它们会被默默删除。

# 故事永久链接

永久链接还可以指定应该与目标条目一起打开的目标条目的故事清单，当作一个[条目筛选](Filters)：

<https://tiddlywiki.com/#TiddlerFields:Tiddlers TiddlerTags TiddlerFields ContentType>

如果目标条目不在故事清单中，则它会自动插入于顶部。这意味着以下两个示例都针对故事串行 `Tiddlers`、`Tags`、`TiddlerFields` 中的条目：

<https://tiddlywiki.com/#Tiddlers:Tags TiddlerFields>

<https://tiddlywiki.com/#Tiddlers:Tiddlers Tags TiddlerFields>

也可以指定故事条目筛选器，而无需指定用于导航的目标条目：

<a href="https://tiddlywiki.com/#:[tag[task]]" rel="noopener noreferrer">~<https://tiddlywiki.com/#:>[tags[task]]</a>

# 关于 URL 编码

对网址片段中的合法字符有技术限制。为了允许处理所有条目，非法字符受制于称为 "URL 编码" 的处理，即问题字符被其数字代码替换。例如，空格字符替换为 "%20"。

目标条目名称和故事筛选器都应该进行 URL 编码（而非分离的冒号）。~TiddlyWiki 生成正确编码的网址，看起来相当丑陋。然而，在实践中，浏览器通常会非常愉快地处理 URL 片段中的任意字符。因此，当手动创建永久链接时，您可以选择忽略 URL 编码。

# 永久链接行为

~TiddlyWiki 使用永久链接行为的两个重要方面，可以通过控制[控制台]($:/ControlPanel) <<.icon $:/core/images/options-button>>''设置''选项卡中的选项。

* 是否在每次导航时自动更新地址栏，如果是这样，是否包括故事串行，以及目标条目
* 地址栏的更新是否应影响浏览器历史记录。默认值为 **no**；当切换为 **yes** 您可以使用浏览器后退和前进按钮，倒带条目之间的导航

请注意，键入或导航到永久链接，总是会导致永久链接被处理，并酌情打开和关闭条目。

## 技术细节

当 ~TiddlyWiki 启动时，它根据以下步骤处理永久链接：如果永久链接发生动态更改，则重复相同的步骤（例如，这发生在用户编辑地址栏时）。

1. 如果永久链接包含冒号，请将之前的字符串视''目标''，将之后的字符串视为''故事筛选器''
1. 如果永久链接未包含冒号，将整个字符串视为''目标''，并将''故事筛选器''标记为//未指定//

1. 如果''故事筛选器''未指定，且我们处于启动过程中， 如果''目标''已指定，则设置''故事筛选器''为空字符串；或如果''目标''未指定,则设为默认条目
1. 如果''故事筛选器''未指定，且我们非处于启动过程中，则设置''故事筛选器''为当前的故事清单
1. 评定''故事筛选器''为''故事清单''
1. 如果''目标''已指定，并且不在''故事清单''中，则将其添加到顶部
1. 如果''目标''已指定，则导航到它，否则导航到''故事清单''中的第一个条目